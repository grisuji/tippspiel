<?php $this->headScript()
    ->appendFile($this->basePath().'/js/highcharts.js', 'text/javascript')
    ->appendFile('http://code.highcharts.com/modules/heatmap.js', 'text/javascript')
    ->appendScript('$(function () {$("#hc_tip_won_container").highcharts(
    {
    "chart": {        type: "heatmap",        marginTop: 40,        marginBottom: 80        },
    title: {        text: "Gewonnene Punkte bei Tipps"        },
    xAxis: {        categories: ["0", "1", "2", "3", "4", "5", ">5"]    },
    yAxis: {        categories: ["0", "1", "2", "3", "4", "5", ">5"],        title: null    },
    colorAxis: {        min: 0,        minColor: "#FFFFFF",        maxColor: "#00FF00", gridLineColor:  "#FF0000"   },
    legend: {        align: "right",        layout: "vertical",        margin: 0,        verticalAlign: "top",        y: 25,        symbolHeight: 280    },
    tooltip:{formatter: function () { return "Bei <b>"+ this.point.x +":"+ this.point.y +"</b> Tipps <br/>gingen " + this.point.value + " Punkte<br/>verloren." ;}},
    series: [{
        name: "Gewonnene Punkte bei Tipp",
        borderWidth: 1,
        data: '.$this->hc_tip_won_data.',
        dataLabels: {
                enabled: true,
                color: "#000000"
                }
        }]
        });
    });'
    )
    ->appendScript('$(function () {$("#hc_tip_lost_container").highcharts(
    {
    "chart": {        type: "heatmap",        marginTop: 40,        marginBottom: 80        },
    title: {        text: "verlorene Punkte bei Tipps"        },
    xAxis: {        categories: ["0", "1", "2", "3", "4", "5", ">5"]    },
    yAxis: {        categories: ["0", "1", "2", "3", "4", "5", ">5"],        title: null    },
    colorAxis: {        min: 0,        minColor: "#FFFFFF",        maxColor: "#FF0000", gridLineColor:  "#FF0000"   },
    legend: {        align: "right",        layout: "vertical",        margin: 0,        verticalAlign: "top",        y: 25,        symbolHeight: 280    },
    tooltip:{formatter: function () { return "Bei <b>"+ this.point.x +":"+ this.point.y +"</b> Tipps <br/>gingen " + this.point.value + " Punkte<br/>verloren." ;}},
    series: [{
        name: "Verlorene Punkte bei Tipp",
        borderWidth: 1,
        data: '.$this->hc_tip_lost_data.',
        dataLabels: {
                enabled: true,
                color: "#000000"
                }
        }]
        });
    });'
    )
    ->appendScript('$(function () {$("#hc_res_won_container").highcharts(
    {
    "chart": {        type: "heatmap",        marginTop: 40,        marginBottom: 80        },
    title: {        text: "gewonnene Punkte bei Ergebissen"        },
    xAxis: {        categories: ["0", "1", "2", "3", "4", "5", ">5"]    },
    yAxis: {        categories: ["0", "1", "2", "3", "4", "5", ">5"],        title: null    },
    colorAxis: {        min: 0,        minColor: "#FFFFFF",        maxColor: "#00FF00"    },
    legend: {        align: "right",        layout: "vertical",        margin: 0,        verticalAlign: "top",        y: 25,        symbolHeight: 280    },
    tooltip:{formatter: function () { return "Bei <b>"+ this.point.x +":"+ this.point.y +"</b> Ergebnissen <br/>wurden " + this.point.value + " Punkte<br/>gewonnen." ;}},
    series: [{
        name: "gewonnene Punkte bei Egebnissen",
        borderWidth: 1,
        data: '.$this->hc_res_won_data.',
        dataLabels: {
                enabled: true,
                color: "#000000"
                }
        }]
        });
    });'
    )
    ->appendScript('$(function () {$("#hc_res_lost_container").highcharts(
    {
    "chart": {        type: "heatmap",        marginTop: 40,        marginBottom: 80        },
    title: {        text: "verlorene Punkte bei Ergebissen"        },
    xAxis: {        categories: ["0", "1", "2", "3", "4", "5", ">5"]    },
    yAxis: {        categories: ["0", "1", "2", "3", "4", "5", ">5"],        title: null    },
    colorAxis: {        min: 0,        minColor: "#FFFFFF",        maxColor: "#FF0000"    },
    legend: {        align: "right",        layout: "vertical",        margin: 0,        verticalAlign: "top",        y: 25,        symbolHeight: 280    },
    tooltip:{formatter: function () { return "Bei <b>"+ this.point.x +":"+ this.point.y +"</b> Ergebnissen <br/>wurden " + this.point.value + " Punkte<br/>gewonnen." ;}},
    series: [{
        name: "Verlorene Punkte bei Ergebnissen",
        borderWidth: 1,
        data: '.$this->hc_res_lost_data.',
        dataLabels: {
                enabled: true,
                color: "#000000"
                }
        }]
        });
    });'
    );
echo $this->headScript();
?>



<section class="userpoints">
    <h1><?php echo $this->userinfo->name ?> </h1>
    <h4><?php echo $this->userinfo->motto ?> </h4>
    <table class="table">
        <tr>
            <td>
                Auswahl des Spielers:
            </td>
            <td>
                <?php
                $form2 = $this->form;
                $form2->prepare();
                $form2->setAttribute('action', $this->url(NULL,array('controller'=>'userpoints', 'action'=>'process')));
                $form2->setAttribute('method', 'post');
                echo $this->form()->openTag($form2);
                echo $this->formElement($form2->get('hidden_day'));
                echo $this->formElement($form2->get('selected_userid'));
                echo $this->form()->closeTag($form2);
                ?>
            </td>
            <td>
                Auswahl des Spieltags:
            </td>
            <td>
                <?php $form1 = $this->form;
                $form1->prepare();
                $form1->setAttribute('action', $this->url(NULL,array('controller'=>'userpoints', 'action'=>'process')));
                $form1->setAttribute('method', 'post');
                echo $this->form()->openTag($form1);
                echo $this->formElement($form1->get('selected_day'));
                echo $this->formElement($form1->get('hidden_userid'));
                echo $this->form()->closeTag($form1);
                ?>
            </td>
        </tr>
    </table>
        <table class="table">
        <tr>
            <th>Spielbeginn</th>
            <th>Heimmannschaft</th>
            <th>Gastmannschaft</th>
            <th>Ergebnis</th>
            <th>Tipp</th>
            <th>Punkte</th>
            <th style="color:#A4A4A4">Todde</th>
        </tr>
        <?php $i=0; foreach ($live as $m) :
            $i++;
            ?>
            <tr>
                <td><?php echo $this->escapeHtml($m->start);?></td>
                <td>
                    <img src="<?php echo $this->basePath().'/img/emblem/'.$m->team1emblem;?>"/>
                    <?php echo $this->escapeHtml($m->team1name);?>
                </td>
                <td>
                    <img src="<?php echo $this->basePath().'/img/emblem/'.$m->team2emblem;?>"/>
                    <?php echo $this->escapeHtml($m->team2name);?>
                </td>
                <td align="center"><?php
                    echo $this->escapeHtml($m->team1goals);
                    echo ' : ';
                    echo $this->escapeHtml($m->team2goals);
                    ?>
                </td>
                <td align="center"><?php
                    echo $this->escapeHtml($m->team1tip);
                    echo ' : ';
                    echo $this->escapeHtml($m->team2tip);
                    ?>
                </td>
                <td><?php
                    if ($m->getPoints() > 0) echo $this->escapeHtml($m->getPoints());
                    ?>
                </td>
                <td style="color:#A4A4A4"><?php
                    if ($m->getToddde() > 0) echo $this->escapeHtml($m->getToddde());
                    ?>
                </td>
            </tr>
        <?php endforeach; ?>
    </table>
    <div>
        <div id="hc_tip_won_container"  style="width: 400px;float: left; height: 400px; margin: 0 auto"></div>
        <div id="hc_tip_lost_container" style="width: 400px; height: 400px; margin: 0 auto"></div>
    </div>
    <div>
        <div id="hc_res_won_container"  style="width: 400px;float: left; height: 400px; margin: 0 auto"></div>
        <div id="hc_res_lost_container" style="width: 400px; height: 400px; margin: 0 auto"></div>
    </div>

</section>