CREATE DATABASE IF NOT EXISTS tippspiel_db;
USE tippspiel_db;

CREATE TABLE IF NOT EXISTS user (
  id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) NOT NULL ,
  email VARCHAR(255) NOT NULL ,
  password TEXT NOT NULL,
  avatar VARCHAR(255),
  motto VARCHAR(255),
  registerdate DATETIME,
  lastlogin DATETIME,
  PRIMARY KEY (id),
  UNIQUE KEY (name)
);

INSERT INTO user (id, name, email, password) VALUES (1, 'admin', 'grisuji@gmx.de','c340a1c3d49035e0a04a85f187471a10');

CREATE TABLE IF NOT EXISTS tips (
  id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  userid INTEGER UNSIGNED NOT NULL,
  matchid INTEGER UNSIGNED NOT NULL,
  team1tip INTEGER UNSIGNED,
  team2tip INTEGER UNSIGNED,
  PRIMARY KEY (id),
  UNIQUE KEY (userid, matchid)
);

CREATE TABLE IF NOT EXISTS teams (
  id INTEGER UNSIGNED NOT NULL,
  longname VARCHAR(255) NOT NULL,
  shortname VARCHAR(255),
  emblem VARCHAR(255),
  PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS matches (
  id INTEGER UNSIGNED NOT NULL,
  league VARCHAR(255) NOT NULL,
  saison VARCHAR(255) NOT NULL,
  groupid INTEGER UNSIGNED NOT NULL,
  date_time DATETIME,
  team1id INTEGER UNSIGNED NOT NULL,
  team2id INTEGER UNSIGNED NOT NULL,
  team1goals INTEGER NOT NULL,
  team2goals INTEGER NOT NULL,
  isfinished BOOL DEFAULT FALSE,
  PRIMARY KEY (id)
);
